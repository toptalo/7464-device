!function(e,t){"use strict";function s(e){var t=!1;return"text"!==e.type&&"textarea"!==e.type||(t=!!e.value),"email"===e.type&&(t=/^.*@.*\..{2,}$/.test(e.value)),t}function a(e){e.classList.contains("is-invalid")||e.classList.add("is-invalid")}function i(e){e.classList.contains("is-invalid")&&e.classList.remove("is-invalid")}function c(){if("object"==typeof e.localStorage){var t=r.querySelector('[name="name"]').value,s=r.querySelector('[name="email"]').value;localStorage.setItem("name",t),localStorage.setItem("email",s)}return!0}var n=t.querySelectorAll(".js-popup-feedback, .js-popup-contacts");[].forEach.call(n,function(t){t.querySelector(".js-popup-close").addEventListener("click",function(e){e.preventDefault(),t.classList.remove("is-visible")},!1),e.addEventListener("keyup",function(e){27===e.keyCode&&t.classList.contains("is-visible")&&t.classList.remove("is-visible")})});var l=t.querySelector(".js-popup-feedback"),o=t.querySelector(".js-show-feedback"),r=t.querySelector(".js-feedback-form"),u=r.querySelectorAll("input, textarea");r.noValidate=!0,o.addEventListener("click",function(t){t.preventDefault(),l.classList.contains("is-shaked")&&l.classList.remove("is-shaked"),l.classList.add("is-visible");var s=[];[].forEach.call(u,function(t){if(i(t),"object"==typeof e.localStorage){var a=localStorage.getItem(t.name);a?t.value=a:s.push(t)}else s.push(t)}),s.length&&s[0].focus()}),r.addEventListener("submit",function(e){var t=0;[].forEach.call(u,function(e){s(e)?i(e):(t+=1,a(e))}),0!==t?(e.preventDefault(),l.classList.add("is-shaked")):c()}),[].forEach.call(u,function(e){e.addEventListener("input",function(){l.classList.contains("is-shaked")&&l.classList.remove("is-shaked"),e.classList.contains("is-invalid")&&s(e)&&i(e)})});var d=t.querySelector(".js-popup-contacts"),v=t.querySelector(".js-show-contacts");v.addEventListener("click",function(e){e.preventDefault(),d.classList.add("is-visible")},!1)}(window,document);